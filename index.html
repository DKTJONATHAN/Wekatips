<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wekatips - Premium Football Predictions</title>
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

        .pulse { animation: pulse 2s infinite; }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }

        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 4px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* Smooth scrolling for about section */
        html {
            scroll-behavior: smooth;
        }

        /* Social media icon style */
        .social-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            background: white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
            transition: transform 0.3s ease;
        }
        .social-icon:hover {
            transform: scale(1.1);
        }
        .social-icon img {
            width: 24px;
            height: 24px;
        }
    </style>
</head>
<body class="bg-gray-50 font-sans">
    <!-- Header -->
    <header class="bg-gradient-to-r from-blue-600 to-purple-600 text-white shadow-lg sticky top-0 z-10">
        <div class="container mx-auto px-4 py-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="flex items-center mb-3 md:mb-0">
                    <div class="bg-white rounded-full w-10 h-10 flex items-center justify-center mr-3">
                        <i class="fas fa-futbol text-blue-600 text-lg"></i>
                    </div>
                    <div>
                        <h1 class="text-xl font-bold">Wekatips</h1>
                        <p class="text-blue-100 text-xs">by Maestropuns</p>
                    </div>
                </div>
                <div class="flex items-center space-x-4">
                    <div class="text-center">
                        <div class="text-2xl font-bold text-green-400" id="successRate">--</div>
                        <p class="text-blue-100 text-xs">Total Odds</p>
                    </div>
                    <a href="https://dktjonathan.github.io/Admin.wekatips" target="_blank" 
                       class="hidden md:block px-3 py-1 bg-white bg-opacity-20 rounded-lg text-sm hover:bg-opacity-30 transition">
                        <i class="fas fa-lock mr-1"></i> Admin
                    </a>
                </div>
            </div>
        </div>
    </header>

    <!-- Navigation -->
    <nav class="bg-white shadow-md">
        <div class="container mx-auto px-4">
            <div class="flex justify-center py-3">
                <div class="flex space-x-4 md:space-x-6">
                    <a href="#tips" class="text-gray-700 hover:text-blue-600 font-medium text-sm md:text-base py-2 border-b-2 border-transparent hover:border-blue-600 transition">Today's Tips</a>
                    <a href="#about" class="text-gray-700 hover:text-blue-600 font-medium text-sm md:text-base py-2 border-b-2 border-transparent hover:border-blue-600 transition">About</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Stats Bar -->
    <section class="bg-white shadow-sm">
        <div class="container mx-auto px-4 py-4">
            <div class="grid grid-cols-1 gap-2 md:gap-4 text-center">
                <div class="p-2">
                    <div class="text-xl md:text-2xl font-bold text-gray-800" id="activeTips">--</div>
                    <div class="text-gray-600 text-xs md:text-sm">Today's Tips</div>
                </div>
            </div>
        </div>
    </section>

    <!-- Main Content -->
    <main class="container mx-auto px-4 py-6">
        <!-- Today's Tips Section -->
        <section id="tips">
            <div class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
                <div class="p-4 md:p-6">
                    <div class="flex flex-col md:flex-row justify-between items-start md:items-center mb-4 gap-3">
                        <div>
                            <h2 class="text-xl md:text-2xl font-bold text-gray-800">Today's Premium Tips</h2>
                            <p class="text-gray-600 text-sm md:text-base" id="currentDate">Loading date...</p>
                        </div>
                        <div class="flex items-center">
                            <p class="text-sm text-gray-500 mr-2">
                                Updated: <span id="lastUpdatedTime">--:--</span>
                            </p>
                            <button onclick="loadMatches(true)" 
                                    class="px-2 md:px-3 py-1 bg-blue-600 text-white rounded-md text-xs md:text-sm hover:bg-blue-700 transition flex items-center">
                                <i class="fas fa-sync-alt text-xs mr-1"></i> Refresh
                            </button>
                        </div>
                    </div>

                    <div id="matchesContainer" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 md:gap-6">
                        <div class="col-span-full text-center py-8">
                            <div class="animate-pulse flex flex-col items-center">
                                <i class="fas fa-circle-notch fa-spin text-blue-500 text-3xl mb-3"></i>
                                <p class="text-gray-600">Loading matches...</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="bg-white rounded-xl shadow-md overflow-hidden mb-8">
            <div class="p-6 md:p-8">
                <h2 class="text-2xl md:text-3xl font-bold text-gray-800 mb-6">About Wekatips</h2>
                
                <div class="space-y-6">
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">What We Offer</h3>
                        <p class="text-gray-600 leading-relaxed">
                            Wekatips is a premium football prediction platform that provides carefully analyzed betting tips 
                            for football matches worldwide. Our team of experts uses statistical analysis, team form, and 
                            other key factors to deliver high-quality predictions with the best possible odds.
                        </p>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Our Mission</h3>
                        <p class="text-gray-600 leading-relaxed">
                            Our mission is to help football betting enthusiasts make informed decisions by providing accurate 
                            predictions and valuable insights. We aim to maintain a high success rate while promoting 
                            responsible gambling practices.
                        </p>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Contact Information</h3>
                        <div class="space-y-3">
                            <div class="flex items-center">
                                <i class="fas fa-phone-alt text-blue-600 mr-3"></i>
                                <span class="text-gray-700">Mobile: 0706396305</span>
                            </div>
                            <div class="flex items-center">
                                <i class="fas fa-envelope text-blue-600 mr-3"></i>
                                <span class="text-gray-700">Email: jonathanmwaniki07@gmail.com</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h3 class="text-xl font-semibold text-gray-800 mb-3">Connect With Us</h3>
                        <div class="flex space-x-4">
                            <a href="https://twitter.com/maestropuns" target="_blank" class="social-icon">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/5/5a/X_icon_2.svg" alt="X (Twitter)">
                            </a>
                            <a href="https://facebook.com/maestropuns" target="_blank" class="social-icon">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/5/51/Facebook_f_logo_%282019%29.svg" alt="Facebook">
                            </a>
                            <a href="https://instagram.com/maestropuns" target="_blank" class="social-icon">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/a/a5/Instagram_icon.png" alt="Instagram">
                            </a>
                            <a href="https://tiktok.com/@maestropuns" target="_blank" class="social-icon">
                                <img src="https://upload.wikimedia.org/wikipedia/commons/e/ef/TikTok_logo_2022.svg" alt="TikTok" style="width: 20px; height: 20px;">
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Disclaimer -->
        <div class="bg-yellow-50 border-l-4 border-yellow-400 p-4 rounded-lg">
            <div class="flex">
                <div class="flex-shrink-0 pt-1">
                    <i class="fas fa-exclamation-triangle text-yellow-400 text-lg mr-3"></i>
                </div>
                <div>
                    <h3 class="text-base md:text-lg font-medium text-yellow-800">Important Disclaimer</h3>
                    <p class="text-yellow-700 text-sm md:text-base mt-1">
                        Betting involves risk and should be done responsibly. These tips are for entertainment purposes only. 
                        Please gamble responsibly and never bet more than you can afford to lose. You must be 18+ to participate in betting activities.
                    </p>
                </div>
            </div>
        </div>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 text-white py-6">
        <div class="container mx-auto px-4">
            <div class="flex flex-col md:flex-row justify-between items-center">
                <div class="mb-4 md:mb-0 text-center md:text-left">
                    <h3 class="text-xl font-bold mb-1">Wekatips</h3>
                    <p class="text-gray-400 text-sm">by Maestropuns</p>
                </div>
                <div class="text-center md:text-right">
                    <p class="text-gray-400 text-sm">&copy; <span id="currentYear"></span> All rights reserved.</p>
                    <p class="text-gray-400 text-xs mt-1">Bet Responsibly | 18+</p>
                </div>
            </div>
        </div>
    </footer>

    <script>
        // Configuration - Update these to match your repo
        const REPO = 'DKTJONATHAN/Wekatips';
        const FILE_PATH = 'data/tips.json';
        const BRANCH = 'main';

        // Global variables
        let matchData = [];
        let lastFetchTime = null;

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            updateDate();
            loadMatches();

            // Refresh every 5 minutes
            setInterval(() => loadMatches(), 300000);
        });

        // Main loading function
        async function loadMatches(forceRefresh = false) {
            const container = document.getElementById('matchesContainer');
            container.innerHTML = `
                <div class="col-span-full text-center py-8">
                    <div class="animate-pulse flex flex-col items-center">
                        <i class="fas fa-circle-notch fa-spin text-blue-500 text-3xl mb-3"></i>
                        <p class="text-gray-600">Loading matches...</p>
                    </div>
                </div>
            `;

            try {
                if (forceRefresh) {
                    await fetchMatches();
                    return;
                }

                // Check cache first
                const cachedData = JSON.parse(localStorage.getItem('cachedMatchData'));
                const cacheTime = localStorage.getItem('cacheTimestamp');

                if (cachedData && cacheTime && (Date.now() - cacheTime < 300000)) {
                    matchData = cachedData;
                    renderMatches();
                    updateLastUpdatedDisplay(cacheTime);
                    calculateTotalOdds();
                    return;
                }

                await fetchMatches();

            } catch (error) {
                console.error("Loading error:", error);
                container.innerHTML = `
                    <div class="col-span-full text-center py-8">
                        <div class="flex flex-col items-center">
                            <i class="fas fa-exclamation-triangle text-red-500 text-3xl mb-3"></i>
                            <p class="text-gray-600 mb-3">Failed to load matches</p>
                            <button onclick="loadMatches(true)" 
                                    class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition flex items-center">
                                <i class="fas fa-redo mr-2"></i> Try Again
                            </button>
                        </div>
                    </div>
                `;
            }
        }

        // Fetch matches from GitHub
        async function fetchMatches() {
            const response = await fetch(`https://raw.githubusercontent.com/${REPO}/${BRANCH}/${FILE_PATH}?t=${Date.now()}`);

            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }

            const data = await response.json();

            if (data.matches && data.matches.length > 0) {
                // Update cache
                matchData = data.matches;
                lastFetchTime = data.updatedAt || new Date().toISOString();

                localStorage.setItem('cachedMatchData', JSON.stringify(matchData));
                localStorage.setItem('cacheTimestamp', Date.now());

                renderMatches();
                updateLastUpdatedDisplay(lastFetchTime);
                calculateTotalOdds();
            } else {
                showNoMatches();
            }
        }

        // Calculate total odds for all matches
        function calculateTotalOdds() {
            if (!matchData || matchData.length === 0) {
                document.getElementById('successRate').textContent = '--';
                return;
            }

            let totalOdds = 1;
            let validOddsCount = 0;
            
            matchData.forEach(match => {
                if (match.odds && !isNaN(parseFloat(match.odds))) {
                    totalOdds *= parseFloat(match.odds);
                    validOddsCount++;
                }
            });

            if (validOddsCount > 0) {
                document.getElementById('successRate').textContent = totalOdds.toFixed(2);
            } else {
                document.getElementById('successRate').textContent = '--';
            }
        }

        // Render matches to the page
        function renderMatches() {
            const container = document.getElementById('matchesContainer');

            if (!matchData || matchData.length === 0) {
                showNoMatches();
                return;
            }

            container.innerHTML = '';

            matchData.forEach((match, index) => {
                const matchCard = createMatchCard(match, index);
                container.appendChild(matchCard);
            });

            // Update stats
            updateStats();
        }

        // Create match card element
        function createMatchCard(match, index) {
            const card = document.createElement('div');
            card.className = 'bg-white rounded-lg shadow-md overflow-hidden fade-in hover:shadow-lg transition';

            // Determine confidence badge color
            let confidenceClass = '';
            let confidenceColor = '';
            if (match.confidence === 'High') {
                confidenceClass = 'bg-green-100 text-green-800';
                confidenceColor = 'text-green-500';
            } else if (match.confidence === 'Medium') {
                confidenceClass = 'bg-yellow-100 text-yellow-800';
                confidenceColor = 'text-yellow-500';
            } else if (match.confidence === 'Very High') {
                confidenceClass = 'bg-blue-100 text-blue-800';
                confidenceColor = 'text-blue-500';
            }

            // Format the tip display
            const formattedTip = formatTipForDisplay(match.tip);

            card.innerHTML = `
                <div class="p-4 md:p-5">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex items-center">
                            <div class="bg-gray-100 rounded-full w-8 h-8 flex items-center justify-center mr-2">
                                <i class="fas fa-futbol ${confidenceColor} text-sm"></i>
                            </div>
                            <div>
                                <h3 class="font-bold text-gray-800 text-sm md:text-base">${match.league}</h3>
                                <p class="text-gray-500 text-xs">${match.time}</p>
                            </div>
                        </div>
                        <span class="px-2 py-1 rounded-full text-xs font-semibold ${confidenceClass}">
                            ${match.confidence}
                        </span>
                    </div>
                    
                    <div class="text-center mb-3">
                        <h4 class="text-lg md:text-xl font-bold text-gray-800 mb-2">${match.homeTeam} vs ${match.awayTeam}</h4>
                        <span class="inline-block bg-gradient-to-r from-blue-600 to-purple-600 text-white px-3 py-1 md:px-4 md:py-2 rounded-lg font-semibold text-sm md:text-base">
                            ${formattedTip}
                        </span>
                    </div>
                    
                    <div class="bg-gray-50 rounded-lg p-2 mb-3">
                        <div class="flex justify-between text-sm">
                            <span class="text-gray-600">Odds: <span class="font-bold text-gray-800">${match.odds}</span></span>
                            <span class="text-gray-600">Return: <span class="font-bold text-gray-800">${(parseFloat(match.odds) * 100).toFixed(0)}%</span></span>
                        </div>
                    </div>
                    
                    <button onclick="placeBet(${JSON.stringify(match).replace(/"/g, '&quot;')})" 
                            class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white py-2 rounded-lg font-medium transition text-sm md:text-base">
                        <i class="fas fa-coins mr-2"></i> Place Bet
                    </button>
                </div>
            `;

            return card;
        }

        // Format different tip types for display
        function formatTipForDisplay(tip) {
            if (!tip) return 'Unknown Tip';

            if (tip.includes('Over')) {
                const value = tip.match(/\d\.\d/)?.[0] || 'X.5';
                return `Over ${value} Goals`;
            } else if (tip.includes('Under')) {
                const value = tip.match(/\d\.\d/)?.[0] || 'X.5';
                return `Under ${value} Goals`;
            } else if (tip.includes('BTTS - Yes')) {
                return 'Both Teams To Score';
            } else if (tip.includes('BTTS - No')) {
                return 'BTTS: No';
            } else if (tip.includes('Win (1X2)')) {
                return tip.replace(' (1X2)', ' Win');
            } else if (tip.includes('Draw (1X2)')) {
                return 'Draw';
            }
            return tip;
        }

        // Show "no matches" message
        function showNoMatches() {
            document.getElementById('matchesContainer').innerHTML = `
                <div class="col-span-full text-center py-8">
                    <div class="flex flex-col items-center">
                        <i class="fas fa-calendar-times text-gray-400 text-3xl mb-3"></i>
                        <h3 class="text-lg font-medium text-gray-700 mb-1">No Matches Today</h3>
                        <p class="text-gray-500 mb-3">Check back later for updated tips</p>
                        <button onclick="loadMatches(true)" 
                                class="px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition flex items-center">
                            <i class="fas fa-sync-alt mr-2"></i> Refresh
                        </button>
                    </div>
                </div>
            `;
            document.getElementById('activeTips').textContent = '0';
            document.getElementById('lastUpdatedTime').textContent = '--:--';
            document.getElementById('successRate').textContent = '--';
        }

        // Update stats display
        function updateStats() {
            document.getElementById('activeTips').textContent = matchData.length;
        }

        // Update last updated time display
        function updateLastUpdatedDisplay(timestamp) {
            const timeEl = document.getElementById('lastUpdatedTime');
            if (!timestamp) {
                timeEl.textContent = '--:--';
                return;
            }

            const date = new Date(timestamp);
            timeEl.textContent = date.toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' });
        }

        // Update current date
        function updateDate() {
            const now = new Date();
            const options = { 
                weekday: 'long', 
                year: 'numeric', 
                month: 'long', 
                day: 'numeric' 
            };
            document.getElementById('currentDate').textContent = now.toLocaleDateString('en-US', options);
            document.getElementById('currentYear').textContent = now.getFullYear();
        }

        // Place bet handler
        function placeBet(data) {
            const formattedTip = formatTipForDisplay(data.tip);
            const message = `
                Recommended bet:
                \n\n${data.homeTeam} vs ${data.awayTeam}
                \nLeague: ${data.league}
                \nTime: ${data.time}
                \nTip: ${formattedTip}
                \nOdds: ${data.odds}
                \nPotential Return: ${(parseFloat(data.odds) * 100).toFixed(0)}%
                \n\nRemember to bet responsibly!
            `;

            alert(message);
        }
    </script>
</body>
</html>